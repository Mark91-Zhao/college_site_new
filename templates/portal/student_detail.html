{% extends "base.html" %}
{% block content %}

<div class="row justify-content-center mt-4">
    <div class="col-md-10">

        <!-- Student Profile Card -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">Student Details</h5>
            </div>

            <div class="card-body">
                <dl class="row">

                    <dt class="col-sm-3">Registration Number</dt>
                    <dd class="col-sm-9">{{ student.reg_number }}</dd>

                    <dt class="col-sm-3">Name</dt>
                    <dd class="col-sm-9">
                        {{ student.user.get_full_name }}
                    </dd>

                    <dt class="col-sm-3">Program</dt>
                    <dd class="col-sm-9">{{ student.program }}</dd>

                    <dt class="col-sm-3">Year</dt>
                    <dd class="col-sm-9">{{ student.year }}</dd>

                    <dt class="col-sm-3">Email</dt>
                    <dd class="col-sm-9">{{ student.user.email }}</dd>

                    <dt class="col-sm-3">Phone Number</dt>
                    <dd class="col-sm-9">{{ student.phone_number }}</dd>

                    <dt class="col-sm-3">GPA</dt>
                    <dd class="col-sm-9">{{ gpa }}</dd>

                    <dt class="col-sm-3">Classification</dt>
                    <dd class="col-sm-9">{{ classification }}</dd>

                </dl>

                <div class="mt-3 text-end">

                    <a href="{% url 'portal:student_update' student.pk %}"
                       class="btn btn-warning">
                        <i class="bi bi-pencil"></i> Edit
                    </a>

                    <a href="{% url 'portal:student_delete' student.pk %}"
                       class="btn btn-danger">
                        <i class="bi bi-trash"></i> Delete
                    </a>

                    <a href="{% url 'portal:student_list' %}"
                       class="btn btn-secondary">
                        Back to Students
                    </a>

                </div>
            </div>
        </div>

        <!-- Results Card -->
        <div class="card shadow-sm">

            <div class="card-header bg-info text-white">
                <h5 class="mb-0">Academic Results</h5>
            </div>

            <div class="card-body">

                {% if results %}

                <table class="table table-striped table-hover">

                    <thead class="table-success">
                        <tr>
                            <th>Course</th>
                            <th>Semester</th>
                            <th>Marks</th>
                            <th>Grade</th>
                            <th>Credit Hours</th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for result in results %}
                        <tr>
                            <td>{{ result.course.name }}</td>
                            <td>{{ result.semester.name }}</td>
                            <td>{{ result.marks }}</td>
                            <td>{{ result.grade_letter }}</td>
                            <td>{{ result.course.credit_hours }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>

                </table>

                {% else %}
                    <p class="text-muted">No results available for this student.</p>
                {% endif %}

            </div>
        </div>

    </div>
</div>

{% endblock %}