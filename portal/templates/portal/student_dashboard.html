{% extends "portal/base.html" %}
{% block content %}

<div class="container mt-4">
    <h2 class="mb-4 text-center">ðŸŽ“ Student Dashboard</h2>

    <div class="row g-4">

        <!-- GPA Card -->
        <div class="col-md-4">
            <div class="card shadow-lg border-primary h-100">
                <div class="card-body text-center">
                    <i class="bi bi-bar-chart-line-fill display-4 text-primary mb-3"></i>
                    <h5 class="card-title">Cumulative GPA</h5>
                    <h1 class="display-4">{{ gpa }}</h1>
                    <p class="text-muted">Your overall performance</p>
                </div>
            </div>
        </div>

        <!-- Academic Status Card -->
        <div class="col-md-4">
            <div class="card shadow-lg border-success h-100">
                <div class="card-body text-center">
                    <i class="bi bi-award-fill display-4 text-success mb-3"></i>
                    <h5 class="card-title">Academic Status</h5>
                    <h3 class="fw-bold">{{ academic_status }}</h3>
                    {% if congratulations %}
                        <p class="text-success">ðŸŽ‰ Congratulations! You passed all courses.</p>
                    {% else %}
                        <p class="text-danger">âš  Some courses need improvement.</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Transcript Card -->
        <div class="col-md-4">
            <div class="card shadow-lg border-warning h-100">
                <div class="card-body text-center">
                    <i class="bi bi-file-earmark-text-fill display-4 text-warning mb-3"></i>
                    <h5 class="card-title">Transcript</h5>
                    <p class="card-text">View or download your academic transcript.</p>
                    <a href="{% url 'portal:transcript' %}" class="btn btn-warning">View Transcript</a>
                    <a href="{% url 'portal:export_transcript_pdf' %}" class="btn btn-outline-warning mt-2">Download PDF</a>
                </div>
            </div>
        </div>

    </div>

    <!-- Semester Details -->
    <div class="mt-5">
        <h4 class="mb-3">ðŸ“š Semester Performance</h4>
        {% for semester in semester_data %}
            <div class="card mb-3 shadow-sm">
                <div class="card-header bg-light fw-bold">
                    {{ semester.semester.name }} â€” GPA: {{ semester.semester_gpa }}
                </div>
                <div class="card-body">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Course</th>
                                <th>Marks</th>
                                <th>Grade</th>
                                <th>Credits</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for course in semester.courses %}
                                <tr>
                                    <td>{{ course.name }}</td>
                                    <td>{{ course.marks }}</td>
                                    <td>{{ course.get_grade_letter }}</td>
                                    <td>{{ course.credit_hours }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        {% endfor %}
    </div>

</div>

{% endblock %}
